<!-- Modal de Detalhes do Funcionário -->
<div class="modal-header">
  <h5 class="modal-title" id="detalhesVendaModalLabel">Detalhes da Venda</h5>
  <button type="button" class="btn-close" (click)="close()" aria-label="Close"></button>
</div>
<div class="modal-body">
  <!-- Formulário de edição -->
  <form  [formGroup]="editForm" *ngIf="isEditing">
    <div class="mb-3">
      <label for="clientes">Selecione um Cliente:</label>
      <select id="clientes" formControlName="idCliente" (change)="onSelecionarCliente($event)">
        <option *ngFor="let cliente of clientes" [value]="cliente.idUser">
          {{ cliente.nome }}
        </option>
      </select>
    </div>
    <div class="mb-3">
      <label for="funcionarios">Selecione um Funcionário:</label>
      <select id="funcionarios" formControlName="idFuncionario" (change)="onSelecionarFuncionario($event)">
        <option *ngFor="let funcionario of funcionarios" [value]="funcionario.idUser">
          {{ funcionario.nome }}
        </option>
      </select>
    </div>
    
    <div class="row">
      <div class="col-md-6">
        <h5>Selecionados</h5>
        <ul class="list-group">
          <li *ngFor="let item of selectedItems" class="list-group-item d-flex justify-content-between">
            {{ item.tipo }}
            <button class="btn btn-danger btn-sm" (click)="removeFromSelected(item)">
              <i class="bi bi-x-circle"></i> <!-- Ícone de remoção -->
            </button>
          </li>
        </ul>
      </div>
  
      <div class="col-md-6">
        <h5>Disponíveis</h5>
        <ul class="list-group">
          <li *ngFor="let servico of servicos" 
              class="list-group-item"
              (click)="addToSelected(servico)">
            {{ servico.tipo }}
          </li>
        </ul>
      </div>
    </div>


    <div class="mb-3">
      <label for="valorPago" class="form-label">Valor a Pagar</label>
      <input type="number" class="form-control" id="valorPago" formControlName="valorPago" name="valorPago" required>
    </div>
    <div class="mb-3">
      <label for="dataVenda" class="form-label">Data da Venda</label>
      <input type="date" class="form-control" id="dataVenda" formControlName="dataVenda" name="dataVenda" required>
    </div>
  </form>

  <!-- Exibição dos dados se não estiver em modo de edição -->
  <div *ngIf="!isEditing">
    <p><strong>Codigo da Venda:</strong> {{ vendaSelecionado.idVenda }}</p>
    <p><strong>Cliente:</strong> {{ vendaSelecionado.cliente.nome }}</p>
    <p><strong>Funcionario:</strong> {{ vendaSelecionado.funcionario.nome }}</p>
    <p><strong>Valor Pago:</strong> {{ vendaSelecionado.valorPago }}</p>
    <p><strong>Data da Venda:</strong> {{ vendaSelecionado.dataVenda }}</p>
  </div>
</div>

<div class="modal-footer">
  <button *ngIf="isEditing" type="submit" class="btn btn-primary" (click)="save()">Salvar Alterações</button>
  <button *ngIf="isEditing" type="button" class="btn btn-danger" (click)="discardChanges()">Descartar Alterações</button>
  <button *ngIf="!isEditing" class="btn btn-warning" (click)="edit()">Editar</button>
  <button type="button" class="btn btn-secondary" (click)="close()">Fechar</button>
</div>
